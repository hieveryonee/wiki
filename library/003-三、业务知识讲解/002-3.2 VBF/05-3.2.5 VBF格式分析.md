

## VBF格式分析

VBF是一种多格式的二进制文件。该文件包括文件头信息、文件加密信息、以及内容数据文件。


```
vbf_version = 2.6;

header {

	#TO版本号
	sw_part_number = "6608056491";

	sw_version = "A";

	sw_part_type = SBL;

	data_format_identifier = 0x00;

	ecu_address = 0x1202;

	file_checksum = 0x3638CF2F;

	verification_block_start = 0x00000000;

	verification_block_length = 0x0000002C;

	#SHA_256 = sha_256(TAG0)
	verification_block_root_hash = 0x37A7BC475C5CDC41A71A506FAADC5B89808D31A21319AED8BB5328FCA90F4DE5;

	#研发签
	sw_signature_dev = 0xB2BE459031A97F9B4CB4DE8A26557ABA5637D55F5C98804EF23D92993EE16080AA6F4DB57BCF238F690C461B3A8F4A25AE71B17078A82A6555263BCE3B6CF352F7CD18A45D8EBAE688C1748DC60A59EF06DD3D02879C6DD520265F0964F30CA7922B062161FEA6CA5CEF0FD3243363246CBCB95D411DB484A6A5551B70AEB1968529B6532F6D8200537A5D26992EDD27A2B0904A14E2DA00C6471962FF3303E2751D92C89131988AF194610504F0EE1FC3D755D93AA0EF41533067040F4E9652142767229FD6B51F5D72A43AA765D243726E2956DD7C47B97C39E0CCE386B32EAB0CE05F5305A24D9289E74A6B20C49BA9520EEB3FBE20EB7B49E66709154D53;

	#生产签
	sw_signature = 0xAC4A7F2233C665371FD80262B23B94A346A30449BD50CBE4601D6505A42CC8EA8B81E7FD7BDBC5833074A1AC1903A620C9988E6E399B1E8E6D922655DF342D8843339DFD8F7D34808B03184A184AD99592C4013E7AB822A024F5D3EDA70BA6E0B778603241B36179E0AC106925D75D91A86BD9997936199E5675C1DC9C6BE186BFC6A5FED8D9D2ABE174EDDFBDF2E5945E628165F4284A3B0C147226B3D79E43CE649A393373F62F4E547C165152E5F517AC81C17CCB8D4C1B05A5C4F6E368AE888256D0071ECE2E20DB8325BC3E49DC889D5625009C4786BEBC6DE27099194776DEAEFBFA28561B85B279DF550E1F4CB9BAE75A2A8D5F9EFB1052D071EB629A;

}

TAG0:

	70 00 00 00   Verification Startaddress

	00 00 00 54   Identifier-length 表示以下块的长度

	TAG1:

		#原始数据文件HASH值
		#block_num

		00 00 00 02

		#block_1

		70 00 10 00   Startaddress

		00 00 0E 12   source bin data length

		04 29 5F A6 D9 F5 C7 2A CE B8 41 BE 37 EB DF C5 9A CB A1 EE 19 3B 70 29 F5 39 0D A7 89 96 96 BC  --- 原始数据的SHA_256值  32字节

		#block_2

		71 00 00 00   Startaddress

		00 00 00 18   source bin data length

		C1 40 05 20 9A 9E AD 51 4E 36 FC 5E 1A 5C F0 A0 4E B7 C7 2F A0 21 23 DE 26 B4 CC ED 30 01 CB 80  --- 原始数据的SHA_256值

	  91 3E --- CRC16(TAG1)

	#原始数据文件

	#block_1

	70 00 10 00      --- Startaddress

	00 00 0E 12      --- length=len(TAG2)

	TAG2:	 

		41 41 30 30 30 30 42 42 30 30 30 30 30 30 30 30 43 43 30 30 30 30 44 44    --- Block1 二进制原始数据

		97 43   --- data checksum CRC16(TAG2)

	#block_2

	71 00 00 00      --- Startaddress

	00 00 00 18      --- length=len(TAG3)

	TAG3:   

		45 45 30 30 30 30 46 46 30 30 30 30 30 30 30 30 47 47 30 30 30 30 48 48    --- Block2 二进制原始数据

		36 27    --- data checksum CRC16(TAG3)

```
